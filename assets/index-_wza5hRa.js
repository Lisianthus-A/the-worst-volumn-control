import{r,u as M,a as s,l as Y,j as d}from"./index-D55Vhqwc.js";import{d as x}from"./index-CUvrryz7.js";const L="_pump_1uqba_1",_="_inner_1uqba_24",R="_handle_1uqba_31",v={pump:L,inner:_,handle:R};function N(){const u=x(),i=r.useRef(null),c=r.useRef(null),n=r.useRef({startY:0,prev:0,current:0,score:0}),a=e=>{const t=c.current;if(!t)return;const{prev:m,current:y,startY:E}=n.current;let o=m+e.clientY-E;o=Math.min(o,50),o=Math.max(o,0);const p=o-y;if(p>0&&(n.current.score+=p,n.current.score>=10)){const b=n.current.score/10;n.current.score%=10;const g=s.getVolume();s.setVolume(Math.min(g+b,100))}n.current.current=o,t.style.setProperty("--offsetY",`${o}px`)},f=e=>{const t=e.touches[0];a({clientX:t.clientX,clientY:t.clientY})},l=()=>{const e=c.current;e&&(document.body.style.userSelect="",e.style.cursor="grab",n.current.prev=Number(e.style.getPropertyValue("--offsetY").slice(0,-2)),u?(window.removeEventListener("touchmove",f),window.removeEventListener("touchend",l)):(window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l)))},h=e=>{if(e.button!==0)return;const t=c.current;t&&(n.current.startY=e.clientY,t.style.cursor="grabbing",document.body.style.userSelect="none",u?(window.addEventListener("touchmove",f),window.addEventListener("touchend",l)):(window.addEventListener("mousemove",a),window.addEventListener("mouseup",l)))},w=e=>{const t=e.touches[0];h({button:0,clientX:t.clientX,clientY:t.clientY})};return M(()=>{const e=s.getVolume();s.setVolume(Math.max(e-1,0))},200),r.useEffect(()=>{const e=s.getElement(),t=()=>{if(!i.current)return;const m=s.getVolume();i.current.style.setProperty("--percentage",`${m}%`)};return e.addEventListener("volumechange",t),()=>{e.removeEventListener("volumechange",t)}},[]),r.useEffect(()=>{const e=document.getElementsByClassName(Y.volume)[0];return e.style.transition="none",()=>{e.style.transition=""}},[]),d.jsxs("div",{className:v.pump,ref:i,children:[d.jsx("div",{className:v.inner}),d.jsx("div",{ref:c,className:v.handle,onMouseDown:u?void 0:h,onTouchStart:u?w:void 0})]})}export{N as default};
