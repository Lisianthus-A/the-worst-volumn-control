import{r as p,a as V,j as r,A as S}from"./index-CP9P8Il6.js";import{t as R}from"./index-G8qFHaVH.js";const A=""+new URL("resistor-DPhASrxV.jpg",import.meta.url).href,M="_wrapper_yy20n_1",k="_canvas_yy20n_8",D="_sub_yy20n_54",m={wrapper:M,"canvas-wrapper":"_canvas-wrapper_yy20n_8",canvas:k,"selector-wrapper":"_selector-wrapper_yy20n_20","resistor-image":"_resistor-image_yy20n_26","dac-text":"_dac-text_yy20n_31","voltage-text":"_voltage-text_yy20n_38","resistor-text":"_resistor-text_yy20n_45",sub:D},s=window.devicePixelRatio||1,x=400*s,b=300*s,j=1e4,B=["Band#1","Band#2","Multiplier"],y=[{name:"Black",color:"#000000",num:0},{name:"Brown",color:"#663231",num:1},{name:"Red",color:"#ff2600",num:2},{name:"Orange",color:"#ff6500",num:3},{name:"Yellow",color:"#fbfb00",num:4},{name:"Green",color:"#33ca20",num:5},{name:"Blue",color:"#6b62ff",num:6},{name:"Violet",color:"#ca63fa",num:7},{name:"Grey",color:"#949095",num:8},{name:"White",color:"#ffffff",num:9}],C=y.map(e=>e.name),E=C.filter(e=>!["Grey","White"].includes(e)),w=(e,n=2)=>e>=1e6?R(e/1e6,n)+"M":e>1e3?R(e/1e3,n)+"K":R(e,n),v=(e,n,t,c,l,d,o=0)=>{e.save(),e.beginPath(),e.moveTo(n+o,t),e.arcTo(n+c,t,n+c,t+l,o),e.arcTo(n+c,t+l,n,t+l,o),e.arcTo(n,t+l,n,t,o),e.arcTo(n,t,n+c,t,o),e.closePath(),e.fillStyle=d,e.fill(),e.restore()},N=(e,n,t)=>{const c=(o,f,h,a)=>v(e,o*s,f*s,h*s,a*s,"#9e9e9e");c(46,60,272,8),c(46,232,272,8),c(46,60,8,180),c(310,60,8,180),v(e,0,100*s,100*s,100*s,"#000000"),e.save(),e.font=`${20*s}px bold`,e.fillStyle="#ffffff";const l=e.measureText("DAC");e.fillText("DAC",50*s-l.width/2,150*s+l.actualBoundingBoxAscent/2),e.restore(),e.drawImage(n,300*s,100*s,100*s,100*s),v(e,136*s,48*s,24*s,32*s,"#e5d8c2",8*s),v(e,160*s,56*s,36*s,16*s,"#e5d8c2"),v(e,196*s,48*s,24*s,32*s,"#e5d8c2",8*s),t.map(o=>y.find(f=>f.name===o).color).forEach((o,f)=>v(e,(164+f*8)*s,56*s,4*s,16*s,o)),v(e,188*s,56*s,4*s,16*s,"#ce982d")};function P(){const[,e]=p.useState(0),n=p.useRef(null),t=p.useRef(null),c=p.useRef(null),l=p.useRef(new Image),d=p.useRef(["Black","Black","Black"]),{voltage:o,resistance:f}=(()=>{const a=d.current.map(g=>y.find(_=>_.name===g)),i=(a[0].num*10+a[1].num)*Math.pow(10,a[2].num),u=j/(i+j)*5;return V.setVolume(u*20>>0),{voltage:u,resistance:i}})(),h=a=>{const i=t.current;if(!i)return;const{name:u,value:g}=a.target,_=B.indexOf(u);d.current[_]=g,e(T=>T+1),N(i,l.current,d.current)};return p.useEffect(()=>{const a=n.current,i=c.current;if(!a||!i)return;const u=a.getContext("2d");u.clearRect(0,0,x,b),t.current=u;const g=encodeURIComponent(new XMLSerializer().serializeToString(i));l.current.src=`data:image/svg+xml; charset=utf8, ${g}`,l.current.onload=()=>{N(u,l.current,d.current)}},[]),r.jsxs("div",{className:m.wrapper,children:[r.jsxs("div",{className:m["canvas-wrapper"],children:[r.jsx("canvas",{ref:n,className:m.canvas,width:x,height:b}),r.jsxs("div",{className:m["dac-text"],children:["V",r.jsx("span",{className:m.sub,children:"out"})," : V",r.jsx("span",{className:m.sub,children:"max"})," = 5V"]}),r.jsxs("div",{className:m["voltage-text"],children:[r.jsxs("div",{children:["V",r.jsx("span",{className:m.sub,children:"max"})," = ",w(o),"V"]}),r.jsxs("div",{children:["R = ",w(j,0),"Ω"]})]}),r.jsxs("div",{className:m["resistor-text"],children:["R = ",w(f),"Ω"]})]}),r.jsx("div",{className:m["selector-wrapper"],children:B.map(a=>r.jsxs("label",{children:[r.jsx("div",{children:a}),r.jsx("select",{name:a,onChange:h,children:(a==="Multiplier"?E:C).map(i=>r.jsx("option",{value:i,children:i},i))})]},a))}),r.jsx("img",{className:m["resistor-image"],src:A}),r.jsx(S,{ref:c,style:{display:"none"}})]})}export{P as default};
