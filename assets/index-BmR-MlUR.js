import{r as s,l as b,j as l,a as L}from"./index-CebyOB3Y.js";const M="_wrapper_b7g5s_1",X="_controller_b7g5s_9",j="_track_b7g5s_20",k="_rail_b7g5s_27",a={wrapper:M,controller:X,track:j,rail:k},N=.5,x=.05,S=180;function A(){const p=s.useRef(null),o=s.useRef(null),f=s.useRef({x:0,y:0}),d=s.useRef(!1),m=s.useRef(!1),u=s.useRef(0),n=s.useRef(0),c=s.useRef(50),h=e=>{const t=o.current;if(!t)return;const{x:r,y:w}=f.current,v=(e.clientY-w)/(e.clientX-r),E=m.current&&e.clientX>r||!m.current&&e.clientX<r,_=Math.atan(v)+(E?Math.PI:0);u.current=E?-v:v,t.style.transform=`rotate(${_}rad)`},y=e=>{e.preventDefault();const t=e.touches[0];h({clientX:t.clientX,clientY:t.clientY})},i=()=>{const e=o.current;e&&(document.body.style.userSelect="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",i),window.removeEventListener("touchmove",y),window.removeEventListener("touchend",i),d.current=!0,u.current=0,n.current=0,e.style.cursor="default",e.style.transition="transform 0.4s ease-in-out",e.style.transform="rotate(0)",setTimeout(()=>{e.style.cursor="grab",e.style.transition="",d.current=!1},400))},R=e=>{if(e.button!==0||d.current)return;const t=o.current;t&&(m.current=e.clientX<f.current.x,t.style.cursor="grabbing",document.body.style.userSelect="none",window.addEventListener("mousemove",h),window.addEventListener("mouseup",i),window.addEventListener("touchmove",y),window.addEventListener("touchend",i))},g=e=>{e.preventDefault();const t=e.touches[0];R({button:0,clientX:t.clientX,clientY:t.clientY})};return s.useEffect(()=>{const e=document.getElementsByClassName(b.volume)[0];return e.style.transition="none",()=>{e.style.transition=""}},[]),s.useEffect(()=>{const e=o.current;if(!e)return;const t=()=>{const r=e.getBoundingClientRect();f.current={x:r.left+r.width/2,y:r.top+r.height/2}};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),s.useEffect(()=>{let e=0;const t=()=>{if(e=requestAnimationFrame(t),u.current===0)return;n.current+=N*u.current,n.current>0?(n.current-=x,n.current=Math.max(0,n.current)):(n.current+=x,n.current=Math.min(0,n.current));const r=p.current;if(!r)return;c.current+=n.current,c.current<0?(c.current=0,n.current=0):c.current>100&&(c.current=100,n.current=0);const w=c.current/100*S-6;r.style.setProperty("--offset",`${w}px`),L.setVolume(c.current>>0)};return e=requestAnimationFrame(t),()=>{cancelAnimationFrame(e)}},[]),l.jsx("div",{className:a.wrapper,ref:p,children:l.jsx("div",{className:a.controller,ref:o,onMouseDown:R,onTouchStart:g,children:l.jsx("div",{className:a.track,children:l.jsx("div",{className:a.rail})})})})}export{A as default};
