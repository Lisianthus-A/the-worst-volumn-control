import{r as s,l as _,j as a,a as L}from"./index-8_w9kRc-.js";import{d as X}from"./index-CUvrryz7.js";const j="_wrapper_b7g5s_1",k="_controller_b7g5s_9",N="_track_b7g5s_20",S="_rail_b7g5s_27",d={wrapper:j,controller:k,track:N,rail:S},Y=.5,b=.05,A=180;function T(){const u=X(),p=s.useRef(null),c=s.useRef(null),f=s.useRef({x:0,y:0}),m=s.useRef(!1),h=s.useRef(!1),i=s.useRef(0),n=s.useRef(0),o=s.useRef(50),v=e=>{const t=c.current;if(!t)return;const{x:r,y:w}=f.current,y=(e.clientY-w)/(e.clientX-r),x=h.current&&e.clientX>r||!h.current&&e.clientX<r,M=Math.atan(y)+(x?Math.PI:0);i.current=x?-y:y,t.style.transform=`rotate(${M}rad)`},R=e=>{const t=e.touches[0];v({clientX:t.clientX,clientY:t.clientY})},l=()=>{const e=c.current;e&&(document.body.style.userSelect="",u?(window.removeEventListener("touchmove",R),window.removeEventListener("touchend",l)):(window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",l)),m.current=!0,i.current=0,n.current=0,e.style.cursor="default",e.style.transition="transform 0.4s ease-in-out",e.style.transform="rotate(0)",setTimeout(()=>{e.style.cursor="grab",e.style.transition="",m.current=!1},400))},E=e=>{if(e.button!==0||m.current)return;const t=c.current;t&&(h.current=e.clientX<f.current.x,t.style.cursor="grabbing",document.body.style.userSelect="none",u?(window.addEventListener("touchmove",R),window.addEventListener("touchend",l)):(window.addEventListener("mousemove",v),window.addEventListener("mouseup",l)))},g=e=>{const t=e.touches[0];E({button:0,clientX:t.clientX,clientY:t.clientY})};return s.useEffect(()=>{const e=document.getElementsByClassName(_.volume)[0];return e.style.transition="none",()=>{e.style.transition=""}},[]),s.useEffect(()=>{const e=c.current;if(!e)return;const t=()=>{const r=e.getBoundingClientRect();f.current={x:r.left+r.width/2,y:r.top+r.height/2}};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),s.useEffect(()=>{let e=0;const t=()=>{if(e=requestAnimationFrame(t),i.current===0)return;n.current+=Y*i.current,n.current>0?(n.current-=b,n.current=Math.max(0,n.current)):(n.current+=b,n.current=Math.min(0,n.current));const r=p.current;if(!r)return;o.current+=n.current,o.current<0?(o.current=0,n.current=0):o.current>100&&(o.current=100,n.current=0);const w=o.current/100*A-6;r.style.setProperty("--offset",`${w}px`),L.setVolume(o.current>>0)};return e=requestAnimationFrame(t),()=>{cancelAnimationFrame(e)}},[]),a.jsx("div",{className:d.wrapper,ref:p,children:a.jsx("div",{className:d.controller,ref:c,onMouseDown:u?void 0:E,onTouchStart:u?g:void 0,children:a.jsx("div",{className:d.track,children:a.jsx("div",{className:d.rail})})})})}export{T as default};
